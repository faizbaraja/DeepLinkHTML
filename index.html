<!DOCTYPE html>
<html>
<head>
    <!-- Add to home screen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Template PWA">
    <link rel="apple-touch-startup-image" href="SplashScreen.png">
    <!-- Windows -->
    <meta name="msapplication-TileImage" content="images/icons/icon-144x144.png">
    <meta name="msapplication-TileColor" content="#2F3BA2">
    <script>
     
    function getUrlVars() {
        var vars = {};
        var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
            vars[key] = value;
        });
        return vars;
    }
        
    function getUrlParam(parameter, defaultvalue){
        var urlparameter = defaultvalue;
        if(window.location.href.indexOf(parameter) > -1){
            urlparameter = getUrlVars()[parameter];
        }
        return urlparameter;
    }
        
    function setAppIcon(appIcon){
        var link = document.querySelector("link[rel*='icon']") || document.createElement('link');
        //link.type = 'image/x-icon';
        link.rel = 'apple-touch-icon';
        link.href = appIcon;
        document.getElementsByTagName('head')[0].appendChild(link);
    }
        
    function isRunningStandalone() {
        return (window.matchMedia('(display-mode: standalone)').matches);
    }

    window.onload = function() {
        //<!-- Deep link URL for existing users with app already installed on their device -->
        //window.location = 'tadadeeplinkstaging://app.tada.id/perks/153';        
        //window.location = 'tadadeeplinkstaging://app.tada.id/transaction/147980';        
        //window.location = 'tadadeeplinkstaging://app.tada.id/card/1543891146055888/2254';        
        //window.location = 'tadadeeplinkstaging://app.tada.id/egift/5545/02913200';        
        //window.location = 'tadadeeplinkstaging://app.tada.id';        
        //window.location = 'tadadeeplinkstaging://app.tada.id/';
        //window.location = 'tadadeeplinkstaging://faizbaraja.github.io/arduino.html';
        var cardNumber = getUrlParam('cardNumber','Empty');
        var walletID = getUrlParam('walletID','Empty');
        var iconURL = getUrlParam('cardIcon','Empty');
        var cardName = getUrlParam('cardName','Empty');
        var deepLinkURL = 'tadadeeplinkstaging://app.tada.id/card/'+cardNumber+'/'+walletID
        document.getElementsByTagName("META")[2].content = unescape(cardName);
        setAppIcon(iconURL);

        if (isRunningStandalone()) {
            alert ("card number "+cardNumber);
            /* This code will be executed if app is running standalone */
            //window.location = deepLinkURL
        }
        else{
            alert ("in safari mode");
        }

    }
    </script>

</head>

<body bgcolor="#4193f1">
    
</body>

</html>
